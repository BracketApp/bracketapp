{
    "__props__": {
        "id": "H1P7w2s4D1c7s0G5y6j3E8O717",
        "doc": "createFlightBooking",
        "counter": 1,
        "creationDate": 1724170563877,
        "collection": "view.schema.manager",
        "chunk": "chunk1",
        "lastModified": 1731321495236,
        "dev": true,
        "actions": {
            "updateReturnDateByDuration": {
                "_": "updateDuration();2ndParent().data().returnDate=2ndParent().data().travelDate+data();3rdParent().prev().refresh()",
                "updateDuration": "data()=[259200000?clicked().txt()=3 days?432000000?clicked().txt()=5 days?604800000?clicked().txt()=1 week?864000000?clicked().txt()=10 days?1296000000?clicked().txt()=15 days?2592000000?clicked().txt()=1 month?7776000000?clicked().txt()=3 month]"
            },
            "getTopAirports": "search():[collection=flight.general;doc=defaults]:[defaults:().flight=_.data;airports:()=_.data.topAirports]",
            "resetData": "availabilities:()=:;bookedAvailabilities:()=:",
            "initFlightData": "data()=[trip=Round trip;directFlights=true;groupType=Individual;pax=[adt=2;chd=0;inf=0];search=:[]]",
            "resetFlightData": "data().search=data().search.slice():0:1;[data().search.():[duration.del();returnDate.del()]?data().trip!=Round trip]",
            "selectClass": {
                "_": "setBooking();selectBullet();updatePaxDetails();pricingDetails();():paxDetails.refresh()",
                "setBooking": "bookedAvailabilities:().[nthParent():7.index()]=parent().data().clone();bookedAvailabilities:().[nthParent():7.index()].cabins.availabilities=data().clone()",
                "selectBullet": "backgroundColor()=#f5dfdf;border()=1px solid #fc9a9a",
                "pricingDetails": "@view.component.manager.flight.pricingDetails;pricingDetails()",
                "updatePaxDetails": {
                    "_": "getMaxAvailableSeats();updatePaxDetails()",
                    "updatePaxDetails": "[searchEngine:().pax.adt=pricingDetails:().maxAvailableSeats?pricingDetails:().maxAvailableSeats<=searchEngine:().pax.adt?searchEngine:().pax.chd=pricingDetails:().maxAvailableSeats-searchEngine:().pax.adt]?pricingDetails:().maxAvailableSeats<searchEngine:().pax.adt+searchEngine:().pax.chd",
                    "getMaxAvailableSeats": "pricingDetails:().maxAvailableSeats=bookedAvailabilities:().():[cabins.availabilities.availableSeats].min()"
                }
            },
            "paxDroplistClickHandler": "txt()=clicked().txt();data().chd=[data().chd?txt()>data().chd||data().chd=0?data().chd-[data().chd-txt()]?data().chd>0];data().adt=clicked().txt()+0-data().chd;data().inf=0;@view.component.manager.flight.pricingDetails;pricingDetails();@view.application.root:openPopup;closePopup()?bookedAvailabilities:().len()=0||[clicked().txt().num()<=bookedAvailabilities:().():[cabins.availabilities.availableSeats].min()]"
        },
        "comments": [
            {
                "note": "Round trip",
                "path": [
                    "navbar",
                    "views",
                    0
                ]
            },
            {
                "note": "One way",
                "path": [
                    "navbar",
                    "views",
                    1
                ]
            },
            {
                "note": "Multi city",
                "path": [
                    "navbar",
                    "views",
                    2
                ]
            },
            {
                "note": "Open return",
                "path": [
                    "navbar",
                    "views",
                    3
                ]
            },
            {
                "note": "ind/grp pax direct",
                "path": [
                    "navbar",
                    "views",
                    4
                ]
            },
            {
                "note": "ind/grp",
                "path": [
                    "navbar",
                    "views",
                    4,
                    "views",
                    0
                ]
            },
            {
                "note": "pax",
                "path": [
                    "navbar",
                    "views",
                    4,
                    "views",
                    1
                ]
            },
            {
                "note": "diagram",
                "path": [
                    "navbar",
                    "views",
                    4,
                    "views",
                    1,
                    "views",
                    0
                ]
            },
            {
                "note": "pax",
                "path": [
                    "navbar",
                    "views",
                    4,
                    "views",
                    1,
                    "views",
                    1
                ]
            },
            {
                "note": "direct flights",
                "path": [
                    "navbar",
                    "views",
                    4,
                    "views",
                    2
                ]
            },
            {
                "note": "from",
                "path": [
                    "search",
                    "views",
                    0
                ]
            },
            {
                "note": "swap",
                "path": [
                    "search",
                    "views",
                    1
                ]
            },
            {
                "note": "to",
                "path": [
                    "search",
                    "views",
                    2
                ]
            },
            {
                "note": "travel date",
                "path": [
                    "search",
                    "views",
                    3
                ]
            },
            {
                "note": "return date",
                "path": [
                    "search",
                    "views",
                    4
                ]
            },
            {
                "note": "duration",
                "path": [
                    "search",
                    "views",
                    5
                ]
            },
            {
                "note": "class",
                "path": [
                    "search",
                    "views",
                    6
                ]
            },
            {
                "note": "plus minus",
                "path": [
                    "search",
                    "views",
                    7
                ]
            },
            {
                "note": "minus",
                "path": [
                    "search",
                    "views",
                    7,
                    "views",
                    0
                ]
            },
            {
                "note": "plus",
                "path": [
                    "search",
                    "views",
                    7,
                    "views",
                    1
                ]
            }
        ],
        "collapsed": [
            {
                "path": [
                    "navbar"
                ]
            },
            {
                "path": [
                    "navbar",
                    "tab"
                ]
            },
            {
                "path": [
                    "navbar",
                    "views"
                ]
            },
            {
                "path": [
                    "navbar",
                    "views",
                    0
                ]
            },
            {
                "path": [
                    "navbar",
                    "views",
                    1
                ]
            },
            {
                "path": [
                    "navbar",
                    "views",
                    2
                ]
            },
            {
                "path": [
                    "navbar",
                    "views",
                    3
                ]
            },
            {
                "path": [
                    "navbar",
                    "views",
                    4
                ]
            },
            {
                "path": [
                    "navbar",
                    "views",
                    4,
                    "container"
                ]
            },
            {
                "path": [
                    "navbar",
                    "views",
                    4,
                    "views",
                    0
                ]
            },
            {
                "path": [
                    "navbar",
                    "views",
                    4,
                    "views",
                    1
                ]
            },
            {
                "path": [
                    "navbar",
                    "views",
                    4,
                    "views",
                    2
                ]
            },
            {
                "path": [
                    "search"
                ]
            },
            {
                "path": [
                    "search",
                    "btn"
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    0
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    1
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    2
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    3
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    3,
                    "label"
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    4
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    5
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    6
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    7
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    7,
                    "container"
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    7,
                    "views",
                    0
                ]
            },
            {
                "path": [
                    "search",
                    "views",
                    7,
                    "views",
                    1
                ]
            },
            {
                "path": [
                    "table"
                ]
            },
            {
                "path": [
                    "table",
                    "headers"
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    0
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    0,
                    "container"
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    1
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    2
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    3
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    4
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    5
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    6
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    7
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    8
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    9
                ]
            },
            {
                "path": [
                    "table",
                    "headers",
                    "views",
                    10
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    0
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    1
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    2
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    3
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    4
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    5
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    6
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    7
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    8
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    9
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    10
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    10,
                    "views",
                    0,
                    "views",
                    0
                ]
            },
            {
                "path": [
                    "table",
                    "rows",
                    "views",
                    10,
                    "views",
                    0,
                    "views",
                    1
                ]
            },
            {
                "path": [
                    "updateReturnDateByDuration"
                ]
            },
            {
                "path": [
                    "selectClass"
                ]
            }
        ],
        "arrange": {
            "": [
                "form",
                "actions",
                "title",
                "navbar",
                "search",
                "table",
                "pricingbar",
                "updateReturnDateByDuration",
                "getTopAirports",
                "initFlightData",
                "resetFlightData",
                "resetData",
                "selectClass",
                "paxDroplistClickHandler"
            ],
            "navbar": [
                "class",
                "style",
                "tab",
                "views"
            ],
            "navbar.tab": [
                "actions",
                "class",
                "style"
            ],
            "navbar.views.0": [
                "container",
                "schema",
                "style",
                "text",
                "type"
            ],
            "navbar.views.1": [
                "container",
                "schema",
                "style",
                "text",
                "type"
            ],
            "navbar.views.2": [
                "container",
                "schema",
                "style",
                "text",
                "type"
            ],
            "navbar.views.3": [
                "container",
                "schema",
                "style",
                "text",
                "type"
            ],
            "navbar.views.4": [
                "type",
                "container",
                "class",
                "style",
                "views"
            ],
            "navbar.views.4.container": [
                "style"
            ],
            "navbar.views.4.views.0": [
                "type",
                "droplist",
                "text",
                "style",
                "class",
                "path",
                "actions",
                "inputContainer"
            ],
            "navbar.views.4.views.0.inputContainer": [
                "class",
                "style"
            ],
            "navbar.views.4.views.1": [
                "id",
                "type",
                "style",
                "views"
            ],
            "navbar.views.4.views.1.views.0": [
                "container",
                "icon",
                "style",
                "type"
            ],
            "navbar.views.4.views.1.views.0.container": [
                "actions",
                "class",
                "style"
            ],
            "navbar.views.4.views.1.views.1": [
                "actions",
                "inputContainer",
                "label",
                "mainContainer",
                "path",
                "style",
                "text",
                "type"
            ],
            "navbar.views.4.views.1.views.1.inputContainer": [
                "style"
            ],
            "navbar.views.4.views.1.views.1.label": [
                "style",
                "text"
            ],
            "navbar.views.4.views.1.views.1.mainContainer": [
                "style"
            ],
            "navbar.views.4.views.2": [
                "type",
                "path",
                "style",
                "label"
            ],
            "navbar.views.4.views.2.label": [
                "text",
                "style"
            ],
            "search": [
                "style",
                "btn",
                "views"
            ],
            "search.btn": [
                "action"
            ],
            "search.views.0": [
                "actions",
                "label",
                "path",
                "style",
                "droplist",
                "type"
            ],
            "search.views.0.label": [
                "style",
                "text"
            ],
            "search.views.1": [
                "actions",
                "container",
                "google",
                "icon",
                "style",
                "type"
            ],
            "search.views.1.container": [
                "class",
                "style"
            ],
            "search.views.2": [
                "actions",
                "label",
                "path",
                "style",
                "type",
                "droplist"
            ],
            "search.views.2.label": [
                "style",
                "text"
            ],
            "search.views.3": [
                "actions",
                "clearable",
                "inputType",
                "label",
                "min",
                "path",
                "style",
                "text",
                "type"
            ],
            "search.views.3.label": [
                "style",
                "text"
            ],
            "search.views.4": [
                "actions",
                "clearable",
                "conditions",
                "inputType",
                "label",
                "min",
                "path",
                "style",
                "text",
                "type"
            ],
            "search.views.4.label": [
                "style",
                "text"
            ],
            "search.views.5": [
                "actions",
                "conditions",
                "droplist",
                "label",
                "path",
                "readonly",
                "style",
                "text",
                "type"
            ],
            "search.views.5.label": [
                "style",
                "text"
            ],
            "search.views.6": [
                "data",
                "droplist",
                "label",
                "path",
                "readonly",
                "style",
                "type"
            ],
            "search.views.6.label": [
                "style",
                "text"
            ],
            "search.views.7": [
                "class",
                "conditions",
                "container",
                "style",
                "type",
                "views"
            ],
            "search.views.7.container": [
                "class",
                "style"
            ],
            "search.views.7.views.0": [
                "actions",
                "container",
                "google",
                "icon",
                "style",
                "type"
            ],
            "search.views.7.views.0.container": [
                "class",
                "style"
            ],
            "search.views.7.views.1": [
                "actions",
                "container",
                "google",
                "icon",
                "style",
                "type"
            ],
            "search.views.7.views.1.container": [
                "class",
                "style"
            ],
            "table": [
                "style",
                "actions",
                "headers",
                "rows"
            ],
            "table.headers": [
                "style",
                "views"
            ],
            "table.headers.views.0": [
                "actions",
                "container",
                "style",
                "text",
                "type"
            ],
            "table.headers.views.0.container": [
                "class",
                "style"
            ],
            "table.headers.views.1": [
                "actions",
                "container",
                "style",
                "text",
                "type"
            ],
            "table.headers.views.1.container": [
                "class",
                "style"
            ],
            "table.headers.views.2": [
                "actions",
                "container",
                "style",
                "text",
                "type"
            ],
            "table.headers.views.2.container": [
                "class",
                "style"
            ],
            "table.headers.views.3": [
                "actions",
                "container",
                "style",
                "text",
                "type"
            ],
            "table.headers.views.3.container": [
                "class",
                "style"
            ],
            "table.headers.views.4": [
                "actions",
                "container",
                "style",
                "text",
                "type"
            ],
            "table.headers.views.4.container": [
                "class",
                "style"
            ],
            "table.headers.views.5": [
                "actions",
                "container",
                "style",
                "text",
                "type"
            ],
            "table.headers.views.5.container": [
                "class",
                "style"
            ],
            "table.headers.views.6": [
                "actions",
                "container",
                "style",
                "text",
                "type"
            ],
            "table.headers.views.6.container": [
                "class",
                "style"
            ],
            "table.headers.views.7": [
                "actions",
                "container",
                "style",
                "text",
                "type"
            ],
            "table.headers.views.7.container": [
                "class",
                "style"
            ],
            "table.headers.views.8": [
                "actions",
                "container",
                "style",
                "text",
                "type"
            ],
            "table.headers.views.8.container": [
                "class",
                "style"
            ],
            "table.headers.views.9": [
                "actions",
                "container",
                "style",
                "text",
                "type"
            ],
            "table.headers.views.9.container": [
                "class",
                "style"
            ],
            "table.headers.views.10": [
                "actions",
                "container",
                "style",
                "text",
                "type"
            ],
            "table.headers.views.10.container": [
                "class",
                "style"
            ],
            "table.rows": [
                "style",
                "actions",
                "views"
            ],
            "table.rows.views.0": [
                "type",
                "class",
                "style",
                "views"
            ],
            "table.rows.views.0.views.0": [
                "type",
                "style",
                "src"
            ],
            "table.rows.views.0.views.1": [
                "type",
                "style",
                "text"
            ],
            "table.rows.views.1": [
                "type",
                "text",
                "style",
                "container"
            ],
            "table.rows.views.1.container": [
                "class"
            ],
            "table.rows.views.2": [
                "container",
                "style",
                "text",
                "type"
            ],
            "table.rows.views.2.container": [
                "class"
            ],
            "table.rows.views.3": [
                "container",
                "style",
                "text",
                "type"
            ],
            "table.rows.views.3.container": [
                "class"
            ],
            "table.rows.views.4": [
                "container",
                "style",
                "text",
                "type"
            ],
            "table.rows.views.4.container": [
                "class"
            ],
            "table.rows.views.5": [
                "container",
                "style",
                "text",
                "type"
            ],
            "table.rows.views.5.container": [
                "class"
            ],
            "table.rows.views.6": [
                "container",
                "style",
                "text",
                "type"
            ],
            "table.rows.views.6.container": [
                "class"
            ],
            "table.rows.views.7": [
                "container",
                "style",
                "text",
                "type"
            ],
            "table.rows.views.7.container": [
                "class"
            ],
            "table.rows.views.8": [
                "container",
                "style",
                "text",
                "type"
            ],
            "table.rows.views.8.container": [
                "class"
            ],
            "table.rows.views.9": [
                "container",
                "style",
                "text",
                "type"
            ],
            "table.rows.views.9.container": [
                "class"
            ],
            "table.rows.views.10": [
                "type",
                "class",
                "conditions",
                "style",
                "views"
            ],
            "table.rows.views.10.views.0": [
                "type",
                "style",
                "views",
                "container",
                "data",
                "actions",
                "loop",
                "mount"
            ],
            "table.rows.views.10.views.0.views.0": [
                "type",
                "container",
                "text",
                "style"
            ],
            "table.rows.views.10.views.0.views.0.container": [
                "class",
                "style"
            ],
            "table.rows.views.10.views.0.views.1": [
                "type",
                "style",
                "container",
                "text"
            ],
            "table.rows.views.10.views.0.views.1.container": [
                "class",
                "style"
            ],
            "table.rows.views.10.views.0.container": [
                "style"
            ],
            "table.rows.views.10.views.1": [
                "type",
                "icon",
                "actions",
                "style"
            ],
            "updateReturnDateByDuration": [
                "_",
                "updateDuration"
            ],
            "selectClass": [
                "_",
                "setBooking",
                "pricingDetails",
                "selectBullet",
                "updatePaxDetails"
            ],
            "selectClass.updatePaxDetails": [
                "_",
                "getMaxAvailableSeats",
                "updatePaxDetails"
            ]
        },
        "schema": {},
        "secured": false,
        "size": 22769
    },
    "form": "searchEngine",
    "navbar": {
        "tab": {
            "style": "padding=.5rem 1.5rem;borderRadius=.4rem;cursor=pointer;transition=.2s;[backgroundColor=#fb3b1e?data().trip=_.text]",
            "actions": "[click?openManager()]",
            "class": "flexbox"
        },
        "views": [
            {
                "text": "Round trip",
                "schema": "createFlightBooking",
                "type": "text",
                "style": "fontSize=1.2rem;color=#fb3b1e;[color=#fff?data().trip=txt()]",
                "container": "__.tab"
            },
            {
                "text": "One way",
                "schema": "createFlightBooking",
                "type": "text",
                "style": "fontSize=1.2rem;color=#fb3b1e;[color=#fff?data().trip=txt()]",
                "container": "__.tab"
            },
            {
                "text": "Multi city",
                "schema": "createFlightBooking",
                "type": "text",
                "style": "fontSize=1.2rem;color=#fb3b1e;[color=#fff?data().trip=txt()]",
                "container": "__.tab"
            },
            {
                "text": "Open return",
                "schema": "createFlightBooking",
                "type": "text",
                "style": "fontSize=1.2rem;color=#fb3b1e;[color=#fff?data().trip=txt()]",
                "container": "__.tab"
            },
            {
                "type": "view",
                "views": [
                    {
                        "type": "input",
                        "droplist": "items=:Individual:Group",
                        "text": "Individual",
                        "style": "width=9rem;color=red;fontSize=1.2rem",
                        "class": "pointer",
                        "inputContainer": {
                            "class": "flexbox pointer",
                            "style": "border=0;backgroundColor=#00000000"
                        },
                        "path": "groupType",
                        "actions": "[click:droplist?[form().pax.():[adt=2;chd=0;inf=0]?clicked().txt()=Individual;form().pax.adt+form().pax.chd>9];3rdParent().next().refresh();closePopup()]"
                    },
                    {
                        "type": "view",
                        "views": [
                            {
                                "style": "fontSize=1.3rem;color=#fb3b1e;transition=.2s",
                                "icon": "bi-diagram-3",
                                "container": {
                                    "style": "minHeight=3rem;width=2.5rem;border=1px solid #aaa;borderRadius=.5rem;backgroundColor=#fff;transition=.2s",
                                    "class": "flexbox pointer",
                                    "actions": "[click?openPopup():[form=searchEngine;path=pax;data='@view.schema.manager.adtChdInf']]"
                                },
                                "type": "icon"
                            },
                            {
                                "type": "input",
                                "label": {
                                    "text": "Pax",
                                    "style": "color=red;fontSize=1.2rem"
                                },
                                "style": "fontSize=1.3rem;color=red;[cursor=pointer?form().groupType=Individual]",
                                "inputContainer": {
                                    "style": "border=1px solid #aaa;height=3rem;width=4rem"
                                },
                                "mainContainer": {
                                    "style": "flexDirection=row-reverse;gap=1rem"
                                },
                                "actions": "preventDefault;[readonly=true;droplist=[align=left;preventDefault;items=:1:2:3:4:5:6:7:8:9]?form().groupType=Individual];[mouseup:droplist;change?@view.schema.manager.createFlightBooking;paxDroplistClickHandler()]",
                                "path": "pax",
                                "text": "data().adt+data().chd"
                            }
                        ],
                        "style": "display=flex;gap=.5rem",
                        "id": "paxDetails"
                    },
                    {
                        "type": "checkbox",
                        "path": "directFlights",
                        "label": {
                            "text": "Direct flights",
                            "style": "color=red;fontSize=1.2rem"
                        },
                        "style": "color=red"
                    }
                ],
                "class": "flexbox",
                "container": {
                    "style": "marginLeft=auto"
                },
                "style": "gap=1.5rem"
            }
        ],
        "class": "flex align-center",
        "style": "padding=1rem;width=100%"
    },
    "search": {
        "style": "gap=.5rem;display=grid;width=100%;gridTemplateColumns=[25rem 4rem 25rem 15rem 15rem 10rem 10rem 2fr?form().trip=Round trip?25rem 4rem 25rem 15rem 10rem 2fr 2fr?form().trip=Multi city?25rem 4rem 25rem 15rem 10rem 2fr]",
        "views": [
            {
                "label": {
                    "text": "From",
                    "style": "fontSize=1.3rem"
                },
                "path": "from",
                "style": "fontSize=1.3rem;height=3.5rem;width=100%",
                "type": "input",
                "actions": "clearable=true",
                "droplist": "items=airports:().():name;align=left"
            },
            {
                "actions": "[click?from=data().from;data().from=data().to;data().to=.from;parent().():[prev().refresh();next().refresh()]]",
                "type": "icon",
                "icon": "swap_horiz",
                "google": true,
                "container": {
                    "class": "flexbox pointer",
                    "style": "paddingBottom=.85rem"
                },
                "style": "color=#888;marginTop=auto;fontSize=2rem"
            },
            {
                "label": {
                    "text": "To",
                    "style": "fontSize=1.3rem"
                },
                "path": "to",
                "style": "fontSize=1.3rem;height=3.5rem;width=100%",
                "type": "input",
                "actions": "clearable=true",
                "droplist": "items=airports:().():name;align=left"
            },
            {
                "actions": "data()=todayStart().timestamp()+259200000;[change?data()=data().date().todayStart().timestamp();[2ndParent().data().returnDate=data()+2ndParent().data().duration;3rdParent().next().refresh()?;form().trip=Round trip]?data()]",
                "type": "input",
                "inputType": "date",
                "label": {
                    "text": "Travel Date",
                    "style": "fontSize=1.3rem"
                },
                "style": "fontSize=1.3rem;height=3.5rem;width=100%;paddingRight=.5rem",
                "path": "travelDate",
                "text": "data().toDateInputFormat()",
                "clearable": true,
                "min": "now().timestamp().toDateInputFormat()"
            },
            {
                "actions": "data()=[data()||2ndParent().data().travelDate+604800000];[change?data()=data().date().todayStart().timestamp()]",
                "type": "input",
                "inputType": "date",
                "label": {
                    "text": "Return Date",
                    "style": "fontSize=1.3rem"
                },
                "style": "fontSize=1.3rem;height=3.5rem;width=100%;paddingRight=.5rem",
                "clearable": true,
                "path": "returnDate",
                "conditions": "form().trip=Round trip",
                "text": "data().toDateInputFormat()",
                "min": "now().timestamp().toDateInputFormat()"
            },
            {
                "label": {
                    "text": "Duration",
                    "style": "fontSize=1.3rem"
                },
                "type": "input",
                "path": "duration",
                "conditions": "form().trip=Round trip",
                "style": "fontSize=1.3rem;width=100%;height=3.5rem",
                "droplist": "align=left;items=:3 days:5 days:1 week:10 days:15 days:1 month",
                "actions": "data()=604800000;[click:droplist;[keyup??e().key=Enter]?@view.schema.manager.createFlightBooking;updateReturnDateByDuration()]",
                "readonly": true,
                "text": "1 week"
            },
            {
                "label": {
                    "text": "Cabin Class",
                    "style": "fontSize=1.3rem"
                },
                "type": "input",
                "path": "class",
                "style": "fontSize=1.3rem;width=100%;height=3.5rem",
                "droplist": "align=left;items=:Economy:Business:First Class",
                "readonly": true,
                "data": "Economy"
            },
            {
                "type": "view",
                "views": [
                    {
                        "actions": "hover.style.color=red;[click?nthParent():4.rem()?form().search.len()>1]",
                        "type": "icon",
                        "icon": "remove",
                        "google": true,
                        "container": {
                            "class": "flexbox pointer",
                            "style": "height=3rem;width=3rem;borderRadius=.5rem"
                        },
                        "style": "color=#888;fontSize=2rem;transition=.2s"
                    },
                    {
                        "type": "icon",
                        "icon": "add",
                        "google": true,
                        "container": {
                            "class": "flexbox pointer",
                            "style": "height=3rem;width=3rem;borderRadius=.5rem"
                        },
                        "style": "color=#888;fontSize=2rem;transition=.2s",
                        "actions": "hover.style.color=red;[click?nthParent():4.duplicate()]"
                    }
                ],
                "style": "gap=.5rem",
                "class": "flex",
                "container": {
                    "style": "marginBottom=.5rem;marginTop=auto;marginLeft=3rem",
                    "class": "flex"
                },
                "conditions": "form().trip=Multi city"
            }
        ],
        "btn": {
            "action": "start();@view.server.flight;searchAvailability():[form()]:[availabilities:()=_.availabilities;commissionSheets:()=_.commissionSheets;end():_]"
        }
    },
    "actions": "@view.schema.manager.createFlightBooking;resetData();[initFlightData();getTopAirports()?!data().trip?resetFlightData()]",
    "title": "Create Flight Booking",
    "table": {
        "style": "padding=0 .5rem",
        "headers": {
            "views": [
                {
                    "type": "text",
                    "text": "Airline",
                    "style": "fontSize=1.2rem;color=#888;transition=.2s;cursor=pointer",
                    "actions": "hover.style=[color=#444]",
                    "container": {
                        "style": "height=100%",
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "Travel Date",
                    "style": "fontSize=1.2rem;color=#888;transition=.2s;cursor=pointer",
                    "actions": "hover.style=[color=#444]",
                    "container": {
                        "style": "height=100%",
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "Flight No.",
                    "style": "fontSize=1.2rem;color=#888;transition=.2s;cursor=pointer",
                    "actions": "hover.style=[color=#444]",
                    "container": {
                        "style": "height=100%",
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "From",
                    "style": "fontSize=1.2rem;color=#888;transition=.2s;cursor=pointer",
                    "actions": "hover.style=[color=#444]",
                    "container": {
                        "style": "height=100%",
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "To",
                    "style": "fontSize=1.2rem;color=#888;transition=.2s;cursor=pointer",
                    "actions": "hover.style=[color=#444]",
                    "container": {
                        "style": "height=100%",
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "Dep",
                    "style": "fontSize=1.2rem;color=#888;transition=.2s;cursor=pointer",
                    "actions": "hover.style=[color=#444]",
                    "container": {
                        "style": "height=100%",
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "Arr",
                    "style": "fontSize=1.2rem;color=#888;transition=.2s;cursor=pointer",
                    "actions": "hover.style=[color=#444]",
                    "container": {
                        "style": "height=100%",
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "Stops",
                    "style": "fontSize=1.2rem;color=#888;transition=.2s;cursor=pointer",
                    "actions": "hover.style=[color=#444]",
                    "container": {
                        "style": "height=100%",
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "Aircraft",
                    "style": "fontSize=1.2rem;color=#888;transition=.2s;cursor=pointer",
                    "actions": "hover.style=[color=#444]",
                    "container": {
                        "style": "height=100%",
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "Duration",
                    "style": "fontSize=1.2rem;color=#888;transition=.2s;cursor=pointer",
                    "actions": "hover.style=[color=#444]",
                    "container": {
                        "style": "height=100%",
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "Availability",
                    "style": "fontSize=1.2rem;color=#888;transition=.2s;cursor=pointer",
                    "actions": "hover.style=[color=#444]",
                    "container": {
                        "style": "height=100%",
                        "class": "flex align-center"
                    }
                }
            ],
            "style": "display=grid;gridTemplateColumns=2.5fr 1.5fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 6fr;height=4rem;borderBottom=1px solid #ddd;width=100%"
        },
        "rows": {
            "style": "display=grid;gridTemplateColumns=2.5fr 1.5fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 6fr;height=4rem;width=100%;transition=.2s",
            "views": [
                {
                    "type": "view",
                    "class": "flex align-center",
                    "style": "height=100%",
                    "views": [
                        {
                            "type": "image",
                            "style": "maxHeight=3.5rem;maxWidth=6rem",
                            "src": "data().aircraft.airline.logo"
                        },
                        {
                            "style": "fontSize=1.2rem",
                            "text": "data().aircraft.airline.name",
                            "type": "text"
                        }
                    ]
                },
                {
                    "type": "text",
                    "text": "data().travelDate.date().toDateFormat()",
                    "style": "fontSize=1.2rem",
                    "container": {
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "data().flightNumber",
                    "style": "fontSize=1.2rem",
                    "container": {
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "data().from.iataCode",
                    "style": "fontSize=1.2rem",
                    "container": {
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "data().to.iataCode",
                    "style": "fontSize=1.2rem",
                    "container": {
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "data().departure.toClock()",
                    "style": "fontSize=1.2rem",
                    "container": {
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "data().arrival.toClock()",
                    "style": "fontSize=1.2rem",
                    "container": {
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "0",
                    "style": "fontSize=1.2rem",
                    "container": {
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "data().aircraft.model",
                    "style": "fontSize=1.2rem",
                    "container": {
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "text",
                    "text": "data().flightDuration.toClock():[format=format2]",
                    "style": "fontSize=1.2rem",
                    "container": {
                        "class": "flex align-center"
                    }
                },
                {
                    "type": "view",
                    "class": "flex",
                    "style": "width=100%;height=4rem;padding=.8rem 0;gap=.5rem;justifyContent=space-between",
                    "views": [
                        {
                            "type": "view",
                            "style": "display=flex;height=100%;width=6rem;border=1px solid #ccc;borderRadius=.5rem;backgroundColor=#eee;cursor=pointer;overflow=hidden",
                            "views": [
                                {
                                    "type": "text",
                                    "text": "data().class",
                                    "style": "fontSize=1.2rem",
                                    "container": {
                                        "class": "flexbox",
                                        "style": "width=50%;height=100%"
                                    }
                                },
                                {
                                    "type": "text",
                                    "container": {
                                        "class": "flexbox",
                                        "style": "backgroundColor=#fff;width=50%;height=100%"
                                    },
                                    "text": "data().availableSeats?data().availableSeats<=9?'9+'",
                                    "style": "fontSize=1.2rem"
                                }
                            ],
                            "loop": true,
                            "data": "data().cabins.availabilities.filter():[availableSeats>0].sort():[path=pricings.adult.group]",
                            "mount": true,
                            "container": {
                                "style": "display=flex;height=2.4rem;flex=1;gap=.3rem;flexWrap=wrap"
                            },
                            "actions": "[[loaded?parent().index()=0];click?@view.schema.manager.createFlightBooking;selectClass()]"
                        },
                        {
                            "type": "icon",
                            "actions": "google.symbol;hover.style.color=#000",
                            "style": "fontSize=2.5rem;color=#888;cursor=pointer;transition=.2s",
                            "icon": "expand_more"
                        }
                    ],
                    "conditions": "data().cabins"
                }
            ],
            "actions": "hover.style.backgroundColor=#f6f6f6"
        },
        "actions": "availabilities:()||=:;form=availabilities"
    },
    "pricingbar": true
}